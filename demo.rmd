# Data

`player_fixtures_complete` is the foundation of most functionality.
It contains historical data from vaastav, combined with recent data from the API.
Use the `refresh` option to download the latest API data.

```{r}
source("./data/aggregated/aggregated.R")
gen_player_fixtures_complete("./data", refresh = T)
player_fixtures <- readRDS("./data/aggregated/player_fixtures_complete.RDS")
```

`my_leagues` contains team info on all teams in certain leagues.
The leagues are based on static entry data under /data/fpl/leagues
Up-to-date `player_fixtures_complete` is required, if it is out of date, it is automatically refreshed.

```{r}
gen_fantasy_league_data("./data")
my_leagues <- readRDS("./data/aggregated/my_leagues.RDS")
```

Predictions are generated by code under the `/models/` directory.
To create predictions from a given model, run the associated functions.
Data is not refreshed by the modelling functions, they need to be refreshed prior to running the models with the `gen_player_fixtures_complete` function.

```{r}
source("./models/predict-goal/gen_goal_model_data.R")
source("./models/predict-goal/gen_goal_model_predictions.R")

goal_model_data <- gen_goal_model_data("./data")
gen_goal_model_predictions(goal_model_data) %>% 
  filter(!finished)
```

```{r}
source("./models/predict-assist/gen_assist_model_data.R")
source("./models/predict-assist/gen_assist_model_predictions.R")

assist_model_data <- gen_goal_model_data("./data")
gen_goal_model_predictions(assist_model_data) %>% 
  filter(!finished)
```

```{r}
source("./models/predict-cs/gen_cs_model_data.R")
source("./models/predict-cs/gen_cs_model_predictions.R")

cs_model_data <- gen_cs_model_data("./data")
gen_cs_model_predictions(cs_model_data) %>% 
  filter(!finished)
```

